!function(e){var t={};function l(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=e,l.c=t,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(r,o,function(t){return e[t]}.bind(null,o));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=1)}([,function(e,t,l){"use strict";l.r(t);const r=chrome.runtime.id;var o,n;let s=[],c=new class{constructor(){this.elId="foxex-root-container",this.iframeId="iframe-container"}createIframe(e){let t=document.createElement("div");t.id=this.elId,t.style.position="fixed",t.style["z-index"]=2147483647,t.style.top=0,t.style.right=0,t.style.width="315px",t.style.height="100vh";let l=document.createElement("div");l.id="controlArrow",l.style.position="absolute",l.style.background="#0073ca",l.style.cursor="pointer",l.style.width="30px",l.style.height="30px",l.style.left="-30px",l.style.color="#fff",l.style.display="flex",l.style["align-items"]="center",l.style["justify-content"]="center",l.innerHTML="ğŸ‘ˆ",t.append(l),setTimeout(()=>{document.querySelector("#controlArrow").addEventListener("click",e=>{"315px"===t.style.width?(l.innerHTML="ğŸ‘‰",t.style.width="60vw"):(l.innerHTML="ğŸ‘ˆ",t.style.width="315px")})},1e3);let o=document.createElement("iframe");o.allow="autoplay",o.id=this.iframeId,o.style.display="block",o.style.height="100vh",o.style.width="100%",o.style.border="none",o.style["box-shadow"]="4px 0px 16px 4px #0000001a",t.append(o),document.getElementsByTagName("body")[0].append(t),o.setAttribute("src",`chrome-extension://${r}/client/index.html?id=${e}`)}removeIframe(){let e=document.getElementById(this.elId);e&&e.parentNode.removeChild(e)}},a=new class{drawOutline(e){e.target.style.outline="2px solid #ffc107",o=e.target}removeOutline(e){e.target.style.outline=""}},u=new class{constructor(){this.attributes=[],this.element=""}getList(){let e=document.querySelector(".ds_selected");e&&e.classList.remove("ds_selected");let t=[...o.classList];return o.classList.add("ds_selected"),{attributes:t,element:o.localName}}markSelectedClass(e){n&&n.forEach(e=>{e.style.outline="none"}),e.forEach(e=>{e.style.outline="1px solid red"}),n=e}removeSelectedClass(){n&&n.forEach(e=>{e.style.outline="none"})}};chrome.runtime.onMessage.addListener(function(e,t){switch(console.group("message"),console.log(e),console.groupEnd(),e.text){case"create_iframe":c.createIframe(e.tabId);break;case"remove_iframe":c.removeIframe();break;case"start_mouse_move":document.addEventListener("mouseover",a.drawOutline),document.addEventListener("mouseout",a.removeOutline);break;case"stop_mouse_move":document.removeEventListener("mouseover",a.drawOutline),document.removeEventListener("mouseout",a.removeOutline);let t=u.getList();i({text:"class_lists",ref:e.ref,lists:t});break;case"mark_element":let r=document.querySelectorAll(`${e.clsName.name}`);u.markSelectedClass(r);break;case"parent_lookup":let o=document.querySelector(".ds_selected");if(o){o.classList.remove("ds_selected");let t=o.parentElement,l=[...t.classList];t.classList.add("ds_selected");let r={text:"class_lists",ref:e.ref,lists:{attributes:l,element:t.localName}};i(r)}break;case"sibling_lookup":let n=document.querySelectorAll(`${e.elementRef.element}`)[e.elementRef.prevIndexNum],m=document.querySelectorAll(`${e.elementRef.element}`)[e.elementRef.indexNum];m&&(m.style.outline="5px solid #ffc107",n.style.outline="");break;case"run_script":s=[];var l=document.querySelectorAll(e.schema.row.rowCls);l&&(l.forEach(t=>{var l={};e.schema.columns.map(e=>{if("text"===e.contentType)l[e.colName]=t.querySelector(e.colCls)&&t.querySelector(e.colCls).textContent?t.querySelector(e.colCls).textContent:"";else if("url"===e.contentType){let r=t.querySelector(e.colCls);"A"!==r.tagName?l[e.colName]=r.querySelector("a")&&r.querySelector("a").href?r.querySelector("a").href:"":l[e.colName]=r&&r.href?r.href:""}else"html"===e.contentType&&(l[e.colName]=t.querySelector(e.colCls)&&t.querySelector(e.colCls).innerHTML?t.querySelector(e.colCls).innerHTML:"")}),s.push(l)}),i({text:"data_table",tableItem:s}));break;case"run_script_from_popup":s=[];var l=document.querySelectorAll(e.schema.row.rowCls);l&&(l.forEach(t=>{var l={};e.schema.columns.map(e=>{if("text"===e.contentType)l[e.colName]=t.querySelector(e.colCls)&&t.querySelector(e.colCls).textContent?t.querySelector(e.colCls).textContent.replace(/\n/g,"").trim():"";else if("url"===e.contentType){let r=t.querySelector(e.colCls);"A"!==r.tagName?l[e.colName]=r.querySelector("a")&&r.querySelector("a").href?r.querySelector("a").href:"":l[e.colName]=r&&r.href?r.href:""}else"html"===e.contentType&&(l[e.colName]=t.querySelector(e.colCls)&&t.querySelector(e.colCls).innerHTML?t.querySelector(e.colCls).innerHTML:"")}),s.push(l)}),i({text:"create_download_tab",website_url:location.origin,tableItem:s}));break;case"run_script_for_download":s=[];var l=document.querySelectorAll(e.schema.row.rowCls);l&&(l.forEach(t=>{var l={};e.schema.columns.map(e=>{if("text"===e.contentType)l[e.colName]=t.querySelector(e.colCls)&&t.querySelector(e.colCls).textContent?t.querySelector(e.colCls).textContent.replace(/\n/g,"").trim():"";else if("url"===e.contentType){let r=t.querySelector(e.colCls);"A"!==r.tagName?l[e.colName]=r.querySelector("a")&&r.querySelector("a").href?r.querySelector("a").href:"":l[e.colName]=r&&r.href?r.href:""}else"html"===e.contentType&&(l[e.colName]=t.querySelector(e.colCls)&&t.querySelector(e.colCls).innerHTML?t.querySelector(e.colCls).innerHTML:"")}),s.push(l)}),i({text:"new_data_send_to_download_page",reciverId:e.senderId,tableItem:s}));break;case"save_schema":u.removeSelectedClass()}});const i=e=>{chrome.runtime.sendMessage(e)}}]);